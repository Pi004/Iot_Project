<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Safety System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="login2.css">
</head>
<body>
    
    <div class="header">
        <h1 class="main-title">Proactive Accident Mitigation and Enhanced Safety</h1>
    </div>
    <div class="container">
        <div class="content-section">
            <h2 class="features-title">About Us</h2>
            <p class="description">
                This system is designed to enhance vehicle safety by leveraging advanced sensor technologies and real-time data processing. Our smart accident detection mechanism identifies potential collisions and immediately shares critical information, including GPS location, with registered contacts. It also tells us the status of the driver such as Drowsiness, Alcohol level, etc.
            </p>
            <h2 class="features-title">Features</h2>
            <div class="feature-points">
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Real-time Accident Detection</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-location-dot"></i>
                    <span>GPS Tracking</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Anti-Theft System</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-bell"></i>
                    <span>Instant Alerts</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Evidence Capture</span>
                </div>
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <span>Cloud Storage</span>
                </div>
            </div>
        </div>

        <div class="login-container">
            <form class="login-form" onsubmit="return login(event)">
                <h2>Login</h2>
                <input type="text" id="name" placeholder="Full Name" required>
                <div class="phone-container">
                    <span>+91</span>
                    <input type="tel" id="phone" placeholder="Primary Mobile Number" required>
                </div>
                <div class="phone-container">
                    <span>+91</span>
                    <input type="tel" id="secondaryPhone" placeholder="Secondary Mobile Number">
                </div>
                <input type="text" id="address" placeholder="Address" required>
                <input type="text" id="carNumber" placeholder="Car Registration Number (KA 01 MX 1234)" required>
                <button type="submit">Login <i class="fas fa-arrow-right"></i></button>
                <p id="error-message" class="error"></p>
            </form>
        </div>
    </div>
    <footer class="footer">
        <p>All Rights Reserved @2025</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const phone = document.getElementById("phone");
            const secondaryPhone = document.getElementById("secondaryPhone");
            const errorMessage = document.getElementById("error-message");

            function validatePhones() {
                if (secondaryPhone.value && phone.value === secondaryPhone.value) {
                    errorMessage.innerText = "Primary and secondary phone numbers cannot be the same.";
                    secondaryPhone.style.borderColor = "#dc3545";
                    return false;
                } else {
                    errorMessage.innerText = "";
                    secondaryPhone.style.borderColor = "#e1e1e1";
                    return true;
                }
            }

            phone.addEventListener('input', validatePhones);
            secondaryPhone.addEventListener('input', validatePhones);
        });

        function login(event) {
            event.preventDefault();

            const name = document.getElementById("name").value.trim();
            const phone = document.getElementById("phone").value.trim();
            const secondaryPhone = document.getElementById("secondaryPhone").value.trim();
            const carNumber = document.getElementById("carNumber").value.trim();
            const errorMessage = document.getElementById("error-message");

            const nameRegex = /^[A-Za-z\s]+$/;
            if (!nameRegex.test(name)) {
                errorMessage.innerText = "Name must contain only letters.";
                return false;
            }

            const phoneRegex = /^[1-9][0-9]{9}$/;
            if (!phoneRegex.test(phone)) {
                errorMessage.innerText = "Primary phone must be 10 digits.";
                return false;
            }

            if (secondaryPhone) {
                if (!phoneRegex.test(secondaryPhone)) {
                    errorMessage.innerText = "Secondary phone must be 10 digits.";
                    return false;
                }
                
                if (phone === secondaryPhone) {
                    errorMessage.innerText = "Primary and secondary phone numbers cannot be the same.";
                    return false;
                }
            }

            const carNumberRegex = /^[A-Z]{2} \d{2} [A-Z]{2} \d{4}$/;
            if (!carNumberRegex.test(carNumber)) {
                errorMessage.innerText = "Car registration number must be in 'AA 11 AA 1111' format.";
                return false;
            }

            localStorage.setItem("userName", name);

            setTimeout(() => {
                window.location.href = "dashboard.html";
            }, 1000);

            return true;
        }
    </script>
</body>
</html>